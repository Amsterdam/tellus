# -*- coding: utf-8 -*-
# Generated by Eelke on 2018-09-03 15:55
from __future__ import unicode_literals

from django.db import migrations


class Migration(migrations.Migration):

    dependencies = [
        ("tellus_data", "0018_table_tellus_data_cars_per_hour_per_day"),
    ]

    operations = [
        migrations.RunSQL("""
          DROP TABLE IF EXISTS tellus_data_tellus_richting;

          CREATE TABLE tellus_data_tellus_richting (
            id_richting VARCHAR(5) PRIMARY KEY,
            id_tellus INT,
            naam_richting VARCHAR(80));
          INSERT INTO tellus_data_tellus_richting (id_richting, id_tellus, naam_richting)
            (SELECT
               unnest(array[id::TEXT || '-' ||'1',id::TEXT || '-' || '2']),
               id,
               -- unnest(array[1,2]) as id_richting,
               unnest(array[richting_1,richting_2])
            FROM 
                public.tellus_data_tellus);

            ALTER TABLE public.tellus_data_cars_per_hour_per_day
              OWNER TO tellus;
        """),
    ]
